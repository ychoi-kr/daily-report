# 営業日報システムテスト仕様書

## 1. テスト概要

### 1.1 目的
営業日報システムが要件定義書に記載された機能要件・非機能要件を満たしていることを確認する。

### 1.2 テスト範囲
- 画面機能テスト
- API機能テスト
- データベース整合性テスト
- 権限制御テスト
- 性能テスト
- セキュリティテスト

### 1.3 テストレベル
| レベル | 内容 | 実施者 |
|--------|------|--------|
| 単体テスト | 個別機能の動作確認 | 開発者 |
| 結合テスト | 機能間の連携確認 | 開発者 |
| システムテスト | システム全体の動作確認 | テストチーム |
| 受入テスト | 業務要件の充足確認 | ユーザー |

## 2. テスト環境

### 2.1 ハードウェア環境
- Webサーバー：CPU 4コア、メモリ 8GB
- DBサーバー：CPU 4コア、メモリ 16GB
- クライアントPC：Windows 10/11、macOS

### 2.2 ソフトウェア環境
- OS：Linux (Ubuntu 20.04 LTS)
- Webサーバー：Nginx 1.18
- アプリケーション：Node.js 18.x
- データベース：PostgreSQL 14
- ブラウザ：Chrome最新版、Edge最新版、Safari最新版

### 2.3 テストデータ
- 営業担当者：10名（管理者2名、一般8名）
- 顧客：100社
- 日報：過去3ヶ月分（約600件）

## 3. 単体テスト仕様

### 3.1 認証機能テスト

#### TC-AUTH-001：ログイン成功
| 項目 | 内容 |
|------|------|
| テスト内容 | 正しいメールアドレスとパスワードでログイン |
| 前提条件 | 有効なユーザーアカウントが存在する |
| テストデータ | メール: yamada@example.com<br>パスワード: Test1234! |
| 期待結果 | 1. ログイン成功<br>2. JWTトークン取得<br>3. 日報一覧画面へ遷移 |

#### TC-AUTH-002：ログイン失敗（パスワード誤り）
| 項目 | 内容 |
|------|------|
| テスト内容 | 誤ったパスワードでログイン試行 |
| 前提条件 | 有効なユーザーアカウントが存在する |
| テストデータ | メール: yamada@example.com<br>パスワード: WrongPass |
| 期待結果 | 1. エラーメッセージ表示<br>2. ログイン画面に留まる |

#### TC-AUTH-003：ログイン失敗（メールアドレス不正）
| 項目 | 内容 |
|------|------|
| テスト内容 | 不正な形式のメールアドレスでログイン試行 |
| 前提条件 | なし |
| テストデータ | メール: invalid-email<br>パスワード: Test1234! |
| 期待結果 | 1. バリデーションエラー表示<br>2. ログインボタン非活性 |

### 3.2 日報作成機能テスト

#### TC-REPORT-001：日報新規作成成功
| 項目 | 内容 |
|------|------|
| テスト内容 | 必須項目を入力して日報作成 |
| 前提条件 | ログイン済み |
| テストデータ | 訪問記録: 1件<br>課題: テストデータ<br>計画: テストデータ |
| 期待結果 | 1. 日報作成成功<br>2. 一覧画面へ遷移<br>3. DBに日報データ登録 |

#### TC-REPORT-002：日報作成失敗（重複）
| 項目 | 内容 |
|------|------|
| テスト内容 | 同一日付の日報を再作成試行 |
| 前提条件 | 当日の日報作成済み |
| テストデータ | 当日日付の日報データ |
| 期待結果 | 1. エラーメッセージ表示<br>2. 「同じ日付の日報が既に存在します」 |

#### TC-REPORT-003：訪問記録複数登録
| 項目 | 内容 |
|------|------|
| テスト内容 | 1つの日報に複数の訪問記録を登録 |
| 前提条件 | ログイン済み |
| テストデータ | 訪問記録: 5件 |
| 期待結果 | 1. 全ての訪問記録が登録される<br>2. 訪問記録の追加/削除が正常動作 |

#### TC-REPORT-004：文字数制限確認
| 項目 | 内容 |
|------|------|
| テスト内容 | 各入力欄の文字数上限確認 |
| 前提条件 | ログイン済み |
| テストデータ | 訪問内容: 501文字<br>課題: 1001文字<br>計画: 1001文字 |
| 期待結果 | 1. エラーメッセージ表示<br>2. 保存ボタン非活性化 |

### 3.3 権限制御テスト

#### TC-AUTH-001：一般ユーザー権限確認
| 項目 | 内容 |
|------|------|
| テスト内容 | 一般ユーザーでの操作権限確認 |
| 前提条件 | 一般ユーザーでログイン |
| 確認項目 | 1. 自分の日報：作成/編集/削除可能<br>2. 他人の日報：閲覧のみ<br>3. コメント：追加不可<br>4. マスタ管理：アクセス不可 |
| 期待結果 | 各権限が仕様通りに制御される |

#### TC-AUTH-002：管理者権限確認
| 項目 | 内容 |
|------|------|
| テスト内容 | 管理者での操作権限確認 |
| 前提条件 | 管理者でログイン |
| 確認項目 | 1. 全日報：閲覧可能<br>2. コメント：追加可能<br>3. マスタ管理：アクセス可能<br>4. 自分の日報：作成/編集可能 |
| 期待結果 | 各権限が仕様通りに制御される |

## 4. 結合テスト仕様

### 4.1 日報作成〜コメント追加フロー

#### TC-INT-001：日報作成からコメント追加まで
| 項目 | 内容 |
|------|------|
| テスト内容 | 営業担当者が日報作成し、管理者がコメントする一連の流れ |
| 手順 | 1. 営業担当者でログイン<br>2. 日報作成<br>3. ログアウト<br>4. 管理者でログイン<br>5. 作成された日報を検索<br>6. コメント追加 |
| 期待結果 | 各ステップが正常に完了し、データが正しく連携される |

### 4.2 マスタ連携テスト

#### TC-INT-002：顧客マスタ追加〜日報登録
| 項目 | 内容 |
|------|------|
| テスト内容 | 新規顧客を追加し、その顧客への訪問記録を作成 |
| 手順 | 1. 管理者で顧客マスタに新規顧客追加<br>2. 営業担当者でログイン<br>3. 新規顧客への訪問記録を含む日報作成 |
| 期待結果 | 新規追加した顧客が選択リストに表示され、日報に登録できる |

## 5. システムテスト仕様

### 5.1 業務シナリオテスト

#### TC-SYS-001：1日の業務フロー
| 項目 | 内容 |
|------|------|
| テスト内容 | 営業担当者の1日の業務をシミュレート |
| シナリオ | 1. 朝：前日の日報確認<br>2. 日中：顧客訪問（3件）<br>3. 夕方：日報作成<br>4. 夜：管理者のコメント確認 |
| 期待結果 | 全ての操作が業務時間内に完了できる |

### 5.2 性能テスト

#### TC-PERF-001：日報一覧表示性能
| 項目 | 内容 |
|------|------|
| テスト内容 | 大量データでの一覧表示性能 |
| 前提条件 | 日報1000件登録済み |
| 測定項目 | 画面表示時間 |
| 合格基準 | 3秒以内に表示完了 |

#### TC-PERF-002：同時アクセステスト
| 項目 | 内容 |
|------|------|
| テスト内容 | 複数ユーザーの同時アクセス |
| 前提条件 | 100ユーザーアカウント準備 |
| 測定項目 | レスポンスタイム、エラー率 |
| 合格基準 | 平均レスポンス3秒以内、エラー率1%未満 |

### 5.3 セキュリティテスト

#### TC-SEC-001：SQLインジェクション対策
| 項目 | 内容 |
|------|------|
| テスト内容 | 各入力欄にSQLインジェクション攻撃を試行 |
| テストデータ | `'; DROP TABLE reports; --` 等 |
| 期待結果 | 1. エラーにならない<br>2. データベースに影響なし |

#### TC-SEC-002：クロスサイトスクリプティング対策
| 項目 | 内容 |
|------|------|
| テスト内容 | 各入力欄にスクリプトタグを入力 |
| テストデータ | `<script>alert('XSS')</script>` |
| 期待結果 | 1. スクリプトが実行されない<br>2. エスケープされて表示 |

#### TC-SEC-003：認証トークン検証
| 項目 | 内容 |
|------|------|
| テスト内容 | 無効なトークンでのAPI呼び出し |
| テストデータ | 期限切れトークン、改ざんトークン |
| 期待結果 | 401 Unauthorizedエラー返却 |

## 6. 受入テスト仕様

### 6.1 機能確認チェックリスト

| 分類 | 確認項目 | 確認結果 |
|------|----------|----------|
| 日報機能 | 日報の作成ができる | □ |
| 日報機能 | 日報の編集ができる | □ |
| 日報機能 | 訪問記録を複数登録できる | □ |
| 日報機能 | 過去日付の日報を検索できる | □ |
| コメント機能 | 管理者がコメントを追加できる | □ |
| コメント機能 | コメント履歴が表示される | □ |
| 権限制御 | 他人の日報は編集できない | □ |
| 権限制御 | 管理者のみマスタ管理できる | □ |
| 使いやすさ | 画面遷移がスムーズ | □ |
| 使いやすさ | エラーメッセージが分かりやすい | □ |

### 6.2 業務運用確認

| 確認項目 | 確認内容 | 確認結果 |
|----------|----------|----------|
| 日次運用 | 全営業担当者が当日中に日報作成可能 | □ |
| 週次運用 | 1週間分の日報をまとめて確認可能 | □ |
| 月次運用 | 月間の活動状況を把握可能 | □ |
| 管理業務 | 部下の活動状況を適切に把握可能 | □ |

## 7. テスト実施記録

### 7.1 テスト実施サマリ
| 項目 | 計画 | 実績 | 備考 |
|------|------|------|------|
| テスト件数 | 50 | - | |
| 実施期間 | 2週間 | - | |
| 不具合件数 | - | - | |
| 対応完了件数 | - | - | |

### 7.2 不具合管理票テンプレート
| 項目 | 内容 |
|------|------|
| 不具合ID | BUG-001 |
| 発見日 | 2025/08/01 |
| 発見者 | テスト太郎 |
| 重要度 | 高/中/低 |
| 発生画面/機能 | |
| 再現手順 | |
| 期待結果 | |
| 実際の結果 | |
| 対応状況 | 未対応/対応中/対応済/保留 |
| 対応者 | |
| 対応完了日 | |

## 8. テスト完了基準

### 8.1 完了条件
- 全テストケースの実施完了
- 重要度「高」の不具合がゼロ
- 重要度「中」の不具合が5件以下
- 性能要件を満たしている
- セキュリティ脆弱性が発見されていない

### 8.2 判定基準
- テスト実施率：100%
- テスト合格率：95%以上
- 不具合収束率：90%以上